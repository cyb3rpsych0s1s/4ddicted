# research on shaders

So how do cyberpunk runs shaders, and is it possible to feed it with online resources ? (e.g. from [ShaderToy](https://www.shadertoy.com/)). I'm not sure it's actually even possible, except maybe by recreating them by hand as a `.mt` file.

Here's what can be found by digging out the sources.

## sourcecode

The way to e.g. trigger a shader directly from a `StatusEffect`, is typically the `Effector`.

> see the previous [experiments with Effector on 2023-02-10](./2023-02-10.md).

And indeed the sources contain:

`ApplyShaderEffector extends Effector`

Then let's look out for its usage, e.g.: 

```swift
// lootContainers.swift
// public native class gameLootBag extends GameObject

private final func ToggleLootHighlight(enable: Bool) -> Void {
  let effectInstance: ref<EffectInstance> = GameInstance.GetGameEffectSystem(this.GetGame()).CreateEffectStatic(n"loot_highlight", n"container_highlight", this);
  EffectData.SetEntity(effectInstance.GetSharedData(), GetAllBlackboardDefs().EffectSharedData.entity, this);
  EffectData.SetBool(effectInstance.GetSharedData(), GetAllBlackboardDefs().EffectSharedData.renderMaterialOverride, false);
  EffectData.SetBool(effectInstance.GetSharedData(), GetAllBlackboardDefs().EffectSharedData.enable, enable);
  effectInstance.Run();
}
```

## assets

Now let's get back in WolvenKit, in the **Assets browser**:

`loot_highlight.es`: (`gameEffectSet`)

```yaml
effects:
 - gameEffectDefinition:
    tag: container_highlight
    effectExecutors:
     - gameEffectExecutor_OverrideMaterial:
        material: base\gameplay\loot\materials\containers_loot_highlight.mi
```

`containers_loot_highlight.mi`: (`CMaterialInstance`)

```yaml
baseMaterial: base\materials\loot_drop_highlight.mt
```

`loot_drop_highlight.mt`: shader description of params, buffers, etc (`CMaterialTemplate`)

Looking into **Tweak browser**, we can also find `ApplyShaderEffector`'s counterpart: `Effectors.ApplyShaderEffector`.
