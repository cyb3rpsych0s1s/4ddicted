# weakened status effect icons

# vanilla MaxDOC icon is missing in DB
UIIcon.first_aid_whiff_icon:
  $type: UIIcon_Record
  atlasPartName: first_aid_whiff
  atlasResourcePath: base\gameplay\gui\widgets\healthbar\atlas_buffinfo.inkatlas

UIIcon.$(threshold)_weakened_$(icon):
  $instances:
    - { threshold: notably,  icon: first_aid_whiff_icon, part_suffix: first_aid_whiff }
    - { threshold: severely, icon: first_aid_whiff_icon, part_suffix: first_aid_whiff }
    - { threshold: notably,  icon: regeneration_icon,    part_suffix: regeneration_icon } # BonesMcCoy70
    - { threshold: severely, icon: regeneration_icon,    part_suffix: regeneration_icon } # BonesMcCoy70
    - { threshold: notably,  icon: health_booster_icon,  part_suffix: slot_consumable_hp }
    - { threshold: severely, icon: health_booster_icon,  part_suffix: slot_consumable_hp }
  $type: UIIcon_Record
  atlasPartName: $(threshold)_weakened_$(part_suffix)
  atlasResourcePath: addicted\gameplay\gui\widgets\healthbar\atlas_buffinfo.inkatlas

# status effect

## first aid whiff (a.k.a maxdoc)

BaseStatusEffect.$(threshold)WeakenedFirstAidWhiff$(version):
  $instances:
    - { icon: notably,  threshold: Notably,  intensity: mildly, version: V0,        value: 0.6 }
    - { icon: severely, threshold: Severely, intensity: piddly, version: V0,        value: 0.3 }
    - { icon: notably,  threshold: Notably,  intensity: mildly, version: V1,        value: 0.6 }
    - { icon: severely, threshold: Severely, intensity: piddly, version: V1,        value: 0.3 }
    - { icon: notably,  threshold: Notably,  intensity: mildly, version: V2,        value: 0.6 }
    - { icon: severely, threshold: Severely, intensity: piddly, version: V2,        value: 0.3 }
    - { icon: notably,  threshold: Notably,  intensity: mildly, version: VEpic,     value: 0.6 }
    - { icon: severely, threshold: Severely, intensity: piddly, version: VEpic,     value: 0.3 }
    - { icon: notably,  threshold: Notably,  intensity: mildly, version: VUncommon, value: 0.6 }
    - { icon: severely, threshold: Severely, intensity: piddly, version: VUncommon, value: 0.3 }
  $base: BaseStatusEffect.FirstAidWhiff$(version)
  packages:
    - $base: BaseStatusEffect.FirstAidWhiff_inline0
      effectors:
        - $base: BaseStatusEffect.FirstAidWhiff_inline1
          statPoolUpdates:
            - $type: StatPoolUpdate_Record
              statPoolType: BaseStatPools.Health
              statModifiers:
                - $base: BaseStatusEffect.FirstAidWhiff_inline4
                  value: $(value)
        - Effectors.UsedHealingItemOrCyberwareEffector
  uiData:
    $base: BaseStatusEffect.FirstAidWhiffV0_inline5
    iconPath: $(icon)_weakened_first_aid_whiff_icon
# TODO: add once VFX archive ready
# VFX:
#   - $type: StatusEffectFX_Record
#     name: $(intensity)_splinter_buff
#     shouldReapply: false

## bounce back (a.k.a bones mccoy)

BaseStatusEffect.$(threshold)WeakenedBonesMcCoy70$(version):
  $instances:
    - { icon: notably, threshold: Notably,  intensity: mildly, version: V0, value: 0.7, modifier: 7 }
    - { icon: severely, threshold: Severely, intensity: piddly, version: V0, value: 0.3, modifier: 3 }
    - { icon: notably, threshold: Notably,  intensity: mildly, version: V1, value: 0.7, modifier: 7 }
    - { icon: severely, threshold: Severely, intensity: piddly, version: V1, value: 0.3, modifier: 3 }
    - { icon: notably, threshold: Notably,  intensity: mildly, version: V2, value: 0.7, modifier: 7 }
    - { icon: severely, threshold: Severely, intensity: piddly, version: V2, value: 0.3, modifier: 3 }
  $base: BaseStatusEffect.BonesMcCoy70$(version)
  packages:
    - $base: BaseStatusEffect.BonesMcCoy70$(version)_inline0
      effectors:
        - $base: BaseStatusEffect.BonesMcCoy70$(version)_inline1
          poolModifier:
            $base: BaseStatusEffect.BonesMcCoy70$(version)_inline2
            valuePerSecMods:
              - $base: BaseStatusEffect.BonesMcCoy70$(version)_inline8
                value: $(value)
        - $base: BaseStatusEffect.BonesMcCoy70$(version)_inline9
          statPoolUpdates:
            - $type: StatPoolUpdate_Record
              statPoolType: BaseStatPools.Health
              statModifiers:
                - $base: BaseStatusEffect.BonesMcCoy70$(version)_inline11
                  value: $(value)
        - Effectors.UsedHealingItemOrCyberwareEffector
  uiData:
    $base: BaseStatusEffect.BonesMcCoy70$(version)_inline12
    iconPath: $(icon)_weakened_regeneration_icon
    intValues: [ $(modifier) ]
# TODO: add once VFX archive ready
# VFX:
#   - $type: StatusEffectFX_Record
#     name: $(intensity)_reflex_buster
#     shouldReapply: false

## health booster

BaseStatusEffect.$(threshold)WeakenedHealthBooster:
  $instances:
    - { icon: notably,  threshold: Notably,  value: 1.07, modifier: 7 }
    - { icon: severely, threshold: Severely, value: 1.03, modifier: 3 }
  $base: BaseStatusEffect.HealthBooster
  packages:
    - $base: BaseStatusEffect.HealthBooster_inline0
      stats:
        - $type: ConstantStatModifier_Record
          modifierType: Multiplier
          statType: BaseStats.Health
          value: $(value)
  uiData:
    $base: BaseStatusEffect.HealthBooster_inline2
    iconPath: $(icon)_weakened_health_booster_icon
    intValues: [ $(modifier) ]

BaseStatusEffect.Blackmarket_$(threshold)WeakenedHealthBooster:
  $instances:
    - { icon: notably,  threshold: Notably,  health: 1.13, regen: -0.4, modifiers: [13, 40] }
    - { icon: severely, threshold: Severely, health: 1.08, regen: -0.2, modifiers: [8, 20] }
  $base: BaseStatusEffect.Blackmarket_HealthBooster
  packages:
    - $base: BaseStatusEffect.Blackmarket_HealthBooster_inline0
      stats:
        - $type: ConstantStatModifier_Record
          modifierType: Multiplier
          statType: BaseStats.Health
          value: $(health)
        - $type: ConstantStatModifier_Record
          modifierType: Additive
          statType: BaseStats.StaminaRegenRateMult
          value: $(regen)
  uiData:
    $base: BaseStatusEffect.Blackmarket_HealthBooster_inline3
    iconPath: $(icon)_weakened_health_booster_icon
    intValues: $(modifiers)

# object action effects

## 'Items.XXX' ConsumableItem_Record
##    objectActions [ItemAction_Record]
##       completionEffects [ObjectActionEffect_Record]
##           statusEffect

Items.$(threshold)WeakenedActionEffect$(consumable)$(version):
  $instances:
    - { threshold: Notably,  consumable: FirstAidWhiff, tier: V0,          version: V0        }
    - { threshold: Severely, consumable: FirstAidWhiff, tier: V0,          version: V0        }
    - { threshold: Notably,  consumable: FirstAidWhiff, tier: V1,          version: V1        }
    - { threshold: Severely, consumable: FirstAidWhiff, tier: V1,          version: V1        }
    - { threshold: Notably,  consumable: FirstAidWhiff, tier: V2,          version: V2        }
    - { threshold: Severely, consumable: FirstAidWhiff, tier: V2,          version: V2        }
    - { threshold: Notably,  consumable: FirstAidWhiff, tier: VUncommon,   version: VUncommon }
    - { threshold: Severely, consumable: FirstAidWhiff, tier: VUncommon,   version: VUncommon }
    - { threshold: Notably,  consumable: FirstAidWhiff, tier: VEpic,       version: VEpic     }
    - { threshold: Severely, consumable: FirstAidWhiff, tier: VEpic,       version: VEpic     }
    - { threshold: Notably,  consumable: BonesMcCoy70,  tier: V0,          version: V0        }
    - { threshold: Severely, consumable: BonesMcCoy70,  tier: V0,          version: V0        }
  $base: Items.$(consumable)$(version)_inline3
  statusEffect: BaseStatusEffect.$(threshold)Weakened$(consumable)$(tier)
