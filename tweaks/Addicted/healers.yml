# weakened status effect icons

UIIcon.$(threshold)Weakened$(consumable):
  $instances:
    - { threshold: Notably,  consumable: FirstAidWhiff, part_prefix: notably,  part_suffix: first_aid_whiff }
    - { threshold: Severely, consumable: FirstAidWhiff, part_prefix: severely, part_suffix: first_aid_whiff }
    - { threshold: Notably,  consumable: BonesMcCoy70,  part_prefix: notably,  part_suffix: regeneration_icon }
    - { threshold: Severely, consumable: BonesMcCoy70,  part_prefix: severely, part_suffix: regeneration_icon }
    - { threshold: Notably,  consumable: HealthBooster, part_prefix: notably,  part_suffix: slot_consumable_hp }
    - { threshold: Severely, consumable: HealthBooster, part_prefix: severely, part_suffix: slot_consumable_hp }
  $type: UIIcon_Record
  atlasPartName: $(part_prefix)_weakened_$(part_suffix)
  atlasResourcePath: addicted\gameplay\gui\widgets\healthbar\atlas_buffinfo.inkatlas

# status effect

## first aid whiff (a.k.a maxdoc)

BaseStatusEffect.$(threshold)WeakenedFirstAidWhiff$(version):
  $instances:
    - { threshold: Notably,  intensity: mildly, version: V0, value: 0.7 }
    - { threshold: Severely, intensity: piddly, version: V0, value: 0.3 }
    - { threshold: Notably,  intensity: mildly, version: V1, value: 0.7 }
    - { threshold: Severely, intensity: piddly, version: V1, value: 0.3 }
    - { threshold: Notably,  intensity: mildly, version: V2, value: 0.7 }
    - { threshold: Severely, intensity: piddly, version: V2, value: 0.3 }
    - { threshold: Notably,  intensity: mildly, version: VUncommon, value: 0.7 }
    - { threshold: Severely, intensity: piddly, version: VUncommon, value: 0.3 }
    - { threshold: Notably,  intensity: mildly, version: VEpic, value: 0.7 }
    - { threshold: Severely, intensity: piddly, version: VEpic, value: 0.3 }
  $base: BaseStatusEffect.FirstAidWhiff$(version)
  packages:
    - $base: BaseStatusEffect.FirstAidWhiff_inline0
      effectors:
        - $base: BaseStatusEffect.FirstAidWhiff_inline1
          statPoolUpdates:
            - $base: BaseStatusEffect.FirstAidWhiff_inline3
              statModifiers:
                - $base: BaseStatusEffect.FirstAidWhiff_inline4
                  value: $(value)
  VFX:
    - $type: StatusEffectFX_Record
      name: $(intensity)_splinter_buff
      shouldReapply: false
  uiData:
    $base: BaseStatusEffect.FirstAidWhiff_inline5
    iconPath: $(threshold)WeakenedFirstAidWhiff

## bounce back (a.k.a bones mccoy)

BaseStatusEffect.$(threshold)WeakenedBonesMcCoy70$(version):
  $instances:
    - { threshold: Notably,  intensity: mildly, version: V0, modifier: 7, value: 0.7, inline: 12 }
    - { threshold: Severely, intensity: piddly, version: V0, modifier: 3, value: 0.3, inline: 12 }
    - { threshold: Notably,  intensity: mildly, version: V1, modifier: 7, value: 0.7, inline: 0 }
    - { threshold: Severely, intensity: piddly, version: V1, modifier: 3, value: 0.3, inline: 0 }
    - { threshold: Notably,  intensity: mildly, version: V2, modifier: 7, value: 0.7, inline: 0 }
    - { threshold: Severely, intensity: piddly, version: V2, modifier: 3, value: 0.3, inline: 0 }
    - { threshold: Notably,  intensity: mildly, version: VUncommon, modifier: 7, value: 0.7, inline: 0 }
    - { threshold: Severely, intensity: piddly, version: VUncommon, modifier: 3, value: 0.3, inline: 0 }
    - { threshold: Notably,  intensity: mildly, version: VEpic, modifier: 7, value: 0.7, inline: 0 }
    - { threshold: Severely, intensity: piddly, version: VEpic, modifier: 3, value: 0.3, inline: 0 }
  $base: BaseStatusEffect.BonesMcCoy70$(version)
  packages:
    - $base: BaseStatusEffect.BonesMcCoy70V0_inline0
      effectors:
        # regeneration
        - $base: BaseStatusEffect.BonesMcCoy70V0_inline1
          poolModifier:
            $base: BaseStatusEffect.BonesMcCoy70V0_inline2
            valuePerSecMods:
              - $base: BaseStatusEffect.BonesMcCoy70V0_inline8
                value: $(value)
        # health
        - $base: BaseStatusEffect.BonesMcCoy70V0_inline9
          statPoolUpdates:
            - $base: BaseStatusEffect.BonesMcCoy70V0_inline10
              statPoolValue: $(value)
        - Effectors.UsedHealingItemOrCyberwareEffector
  VFX:
    - $type: StatusEffectFX_Record
      name: $(intensity)_reflex_buster
      shouldReapply: false
  uiData:
    $base: BaseStatusEffect.BonesMcCoy70$(version)_inline$(inline)
    iconPath: $(threshold)WeakenedBonesMcCoy70
    intValues: [ $(modifier) ]

## health booster

BaseStatusEffect.$(threshold)WeakenedHealthBooster:
  $instances:
    - { threshold: Notably,  modifier: 1.07, modifiers: 7 }
    - { threshold: Severely, modifier: 1.03, modifiers: 3 }
  $base: BaseStatusEffect.HealthBooster
  packages:
    - $base: BaseStatusEffect.HealthBooster_inline0
      stats:
        - $type: ConstantStatModifier_Record
          modifierType: Multiplier
          statType: BaseStats.Health
          value: $(modifier)
  uiData:
    $base: BaseStatusEffect.HealthBooster_inline2
    iconPath: $(threshold)WeakenedHealthBooster
    intValues: [ $(modifiers) ]

BaseStatusEffect.$(threshold)WeakenedBlackmarket_HealthBooster:
  $instances:
    - { threshold: Notably,  modifier: 1.15, modifiers: 15, malus: -0.6, maluses: 60 }
    - { threshold: Severely, modifier: 1.1,  modifiers: 10, malus: -0.7, maluses: 70 }
  $base: BaseStatusEffect.Blackmarket_HealthBooster
  packages:
    - $base: BaseStatusEffect.Blackmarket_HealthBooster_inline0
      stats:
        - $type: ConstantStatModifier_Record
          modifierType: Multiplier
          statType: BaseStats.Health
          value: $(modifier)
        - $type: ConstantStatModifier_Record
          modifierType: Additive
          statType: BaseStats.StaminaRegenRateMult
          value: $(malus)
  uiData:
    $base: BaseStatusEffect.Blackmarket_HealthBooster_inline3
    iconPath: $(threshold)WeakenedHealthBooster
    intValues: [ $(modifiers), $(maluses) ]

# completion effect (object action effect)

Items.$(prefix)$(consumable)$(version)_$(flat)_$(suffix)_weakened:
  $instances:
    # maxdoc
    - { threshold: Notably,  consumable: FirstAidWhiff, version: V0, flat: inline3, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: FirstAidWhiff, version: V0, flat: inline3, prefix: '', suffix: severely }
    - { threshold: Notably,  consumable: FirstAidWhiff, version: V1, flat: inline3, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: FirstAidWhiff, version: V1, flat: inline3, prefix: '', suffix: severely }
    - { threshold: Notably,  consumable: FirstAidWhiff, version: V2, flat: inline3, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: FirstAidWhiff, version: V2, flat: inline3, prefix: '', suffix: severely }
    - { threshold: Notably,  consumable: FirstAidWhiff, version: VUncommon, flat: inline3, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: FirstAidWhiff, version: VUncommon, flat: inline3, prefix: '', suffix: severely }
    - { threshold: Notably,  consumable: FirstAidWhiff, version: VEpic, flat: inline3, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: FirstAidWhiff, version: VEpic, flat: inline3, prefix: '', suffix: severely }
    # bounce back
    - { threshold: Notably,  consumable: BonesMcCoy70,  version: V0, flat: inline3, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: BonesMcCoy70,  version: V0, flat: inline3, prefix: '', suffix: severely }
    - { threshold: Notably,  consumable: BonesMcCoy70,  version: V1, flat: inline3, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: BonesMcCoy70,  version: V1, flat: inline3, prefix: '', suffix: severely }
    - { threshold: Notably,  consumable: BonesMcCoy70,  version: V2, flat: inline3, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: BonesMcCoy70,  version: V2, flat: inline3, prefix: '', suffix: severely }
    - { threshold: Notably,  consumable: BonesMcCoy70,  version: VUncommon, flat: inline8, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: BonesMcCoy70,  version: VUncommon, flat: inline8, prefix: '', suffix: severely }
    - { threshold: Notably,  consumable: BonesMcCoy70,  version: VEpic, flat: inline8, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: BonesMcCoy70,  version: VEpic, flat: inline8, prefix: '', suffix: severely }
    # health booster
    - { threshold: Notably,  consumable: HealthBooster, version: "", flat: inline1, prefix: '', suffix: notably }
    - { threshold: Severely, consumable: HealthBooster, version: "", flat: inline1, prefix: '', suffix: severely }
    - { threshold: Notably,  consumable: HealthBooster, version: "", flat: inline1, prefix: 'Blackmarket_', suffix: notably }
    - { threshold: Severely, consumable: HealthBooster, version: "", flat: inline1, prefix: 'Blackmarket_', suffix: severely }
  $base: Items.$(prefix)$(consumable)$(version)_$(flat)
  statusEffect: BaseStatusEffect.$(threshold)Weakened$(consumable)$(version)

## additional effects

Effectors.LesionChance:
  $type: ConstantStatModifier_Record
  value: 0.2
  modifierType: Additive
  statType: BaseStats.EffectorChance

Effector.RiskLesion:
  $type: ApplyStatusEffectByChanceEffector_Record
  count: 1
  instigator: ''
  inverted: false
  removeWithEffector: true
  statusEffect: BaseStatusEffect.Lesion
  useCountWhenRemoving: true
  effectorClassName: ApplyStatusEffectByChanceEffector
  prereqRecord: Prereqs.AlwaysTruePrereq
  removeAfterActionCall: false
  removeAfterPrereqCheck: false
  effectorChance:
    - Effectors.LesionChance

Attack.Lesion:
  $type: Attack_GameEffect_Record
  audioAttackIndex: 0
  effectName: damage_over_time
  effectTag: default
  attackType: AttackType.Effect
  className: Attack_GameEffect
  damageType: DamageTypes.Physical
  explosionDamageVSVehicles: -1
  hitReactionSeverityMax: 2
  hitReactionSeverityMin: -1
  playerIncomingDamageMultiplier: 1
  range: 0
  useDefaultAimData: false
  userDataPath: ''
  velocity: -1
  hitFlags: [CanDamageSelf, Nonlethal, DamageOverTime, ForceNoCrit]
  staminaCost: []
  statModifiers:
    - $type: ConstantStatModifier_Record
      value: 2.1 # 0.3 for MinorBleeding, 3.25 for Contagion
      modifierType: Additive
      statType: BaseStats.PhysicalDamage
  statusEffects: []

Attacks.BasePhysicalDamageOverTime_inline0:
  $type: gamedataCurveStatModifier_Record
  column: puppet_powerLevelToHealth_base
  id: puppet_power_level_to_health_easy
  refObject: Target
  refStat: BaseStats.PowerLevel
  modifierType: Additive
  statType: BaseStats.PhysicalDamage

Attacks.PhysicalDamageOverTime_inline0:
  $type: gamedataConstantStatModifier_Record
  value: 0.0399999991
  modifierType: Multiplier
  statType: BaseStats.PhysicalDamage

Prereqs.Lesion:
  $type: StatPoolPrereq_Record
  comparePercentage: true
  comparisonType: Greater
  listenConstantly: true
  skipOnApply: false
  statPoolType: AccumulatedDoT
  prereqClassName: ConstantStatPoolPrereq
  valueToCheck:
    - $type: ConstantStatModifier_Record
      value: 20
      modifierType: Additive
      statType: BaseStats.AccumulatedDoT

Effector.Lesion:
  $type: ContinuousAttackEffector_Record
  attackRecord: Attack.Lesion
  delayTime: 0.25
  timeDilationDriver: Effectors.TDD_World
  effectorClassName: TriggerContinuousAttackEffector
  prereqRecord: Prereqs.AlwaysTruePrereq
  removeAfterActionCall: false
  removeAfterPrereqCheck: false
  statModifierGroups: []

Package.Lesion:
  $type: GameplayLogicPackage_Record
  effectors:
    - Effector.Lesion

BaseStatusEffect.Lesion:
  $base: BaseStatusEffect.ContagionPoison
  gameplayTags:
    - Debuff
    - DoT
    - DamageOverTime
  packages:
    - Package.Lesion

Items.OverhealDuration:
  $type: StatModifierGroup_Record
  drawBasedOnStatType: false
  statModifiers:
    - $type: ConstantStatModifier_Record
      modifierType: Additive
      statType: BaseStats.MaxDuration
      value: 120
  statModsLimit: -1
  statModsLimitModifier: None

Stacks.Overheal:
  $type: StatModifierGroup_Record
  drawBasedOnStatType: false
  optimiseCombinedModifiers: false
  saveBasedOnStatType: false
  statModsLimit: -1
  relatedModifierGroups: []
  statModifiers:
    - $type: ConstantStatModifier_Record
      value: 5
      modifierType: Additive
      statType: BaseStats.MaxStacks

Package.Overheal:
  $type: GameplayLogicPackage_Record
  stackable: true
  effectors:
    - Effector.RiskLesion

BaseStatusEffect.Overheal:
  $type: StatusEffect_Record
  duration: Items.OverhealDuration
  gameplayTags: [Debuff]
  maxStacks: Stacks.Overheal
  packages:
    - Package.Overheal
